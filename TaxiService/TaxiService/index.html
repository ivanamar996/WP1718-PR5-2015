<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link href="Taksi.css" rel="stylesheet" type="text/css">
    <title>Taxi Services</title>
    <script src="Scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("a#link1").click(function () {   
                $("div#div1").html("<form accept-charset=\"utf-8\" method=\"post\" action=\"/api/Register/RegisterAccount\">" +
                    "<table class=\"tabela\">" +
                    "<tr><td>Username:</td><td><input type=\"text\" name=\"username\" /></td></tr>" +
                    "<tr><td>Password:</td><td><input type=\"text\" name=\"password\" /></td></tr>" +
                    "<tr><td>Name:</td><td><input type=\"text\" name=\"name\" /></td></tr>" +
                    "<tr><td>Surname:</td><td><input type=\"text\" name=\"Surname\" /></td>" +
                    "<tr><td>Jmbg:</td><td><input type=\"text\" name=\"jmbg\" /></td></tr>" +
                    "<tr><td>Phone:</td><td><input type=\"text\" name=\"phone\" /></td>" +
                    "<tr><td>Email:</td><td><input type=\"text\" name=\"email\" /></td>" +
                    "<tr><td colspan=\"2\"><input type=\"submit\" value=\"Register\" /></td></tr></table></form>");
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("div#div1").html("<form id=\"form1\" accept-charset=\"utf-8\" method=\"post\" action=\"/api/Login/Login\">" +
                    "<table class=\"tabela\">" +
                    "<tr><td>Username:</td><td><input type=\"text\" name=\"username\" /></td></tr>" +
                    "<tr><td>Password:</td><td><input type=\"text\" name=\"password\" /></td></tr>" +
                    "<tr><td colspan=\"2\"><input type=\"submit\" id=\"log\" value=\"Login\"/></td></tr>" +
                    "</table></form>");
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {

                        let linkovi = "<a id=\"link4\">Edit profile</a>";
                        $("div#divVeliki").append("<div id=\"divService\" class=\"Service\"><a id=\"link3\">Service</a></div>");
                        $("div#divVeliki").append("<div id=\"divLink\" class=\"divULinku\"></div>");
                       
                        if (data.Role == 2) {
                            linkovi += "<br><a id=\"link5\">Add driver</a>";
                            linkovi += "<br><a id=\"link10\">Create drive</a>";
                            linkovi += "<br><a id=\"link11\">Process drive</a>";
                            linkovi += "<br><a id=\"link15\">All drives</a>";
                            linkovi += "<br><a id=\"link16\">Your drives</a>";
                        }
                        else if (data.Role == 0) {
                            linkovi += "<br><a id=\"link6\">Change location</a>";
                            linkovi += "<br><a id=\"link12\">Successful drive</a>";
                            linkovi += "<br><a id=\"link13\">Unsuccessful drive</a>";
                        }
                        else if (data.Role == 1) {
                            linkovi += "<br><a id=\"link7\">Create drive</a></br><a id=\"link8\">Change drive</a>";
                            linkovi += "<br><a id=\"link9\">Cancel drive</a>";
                            linkovi += "<br><a id=\"link14\">Drives</a>";
                        }

                        $("div#divLink").html(linkovi);
                        $("div#divLink").hide();
                    });
                });           
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
               $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("div#divLink").slideToggle();
                        });
                    });
               });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status){
                       $("a#link3").click(function () {
                            $("a#link4").click(function () {                                
                                $("div#div1").html(`<form accept-charset=\"utf-8\" method=\"post\" action=\"/api/User/Edit\">` +
                                    `<table class=\"tabela\">` +
                                    `<tr><td>Username:</td><td><input type=\"text\" name=\"username\" value=\"${data.Username}\"/></td></tr>` +
                                    `<tr><td>Password:</td><td><input type=\"text\" name=\"password\" value=\"${data.Password}\" /></td></tr>` +
                                    `<tr><td>Name:</td><td><input type=\"text\" name=\"name\" value=\"${data.Name}\"/></td></tr>` +
                                    `<tr><td>Surname:</td><td><input type=\"text\" name=\"Surname\" value=\"${data.Surname}\"/></td>` +
                                    `<tr><td>Jmbg:</td><td><input type=\"text\" name=\"jmbg\" value=\"${data.Jmbg}\" /></td></tr>` +
                                    `<tr><td>Phone:</td><td><input type=\"text\" name=\"phone\" value=\"${data.Phone}\" /></td>` +
                                    `<tr><td>Email:</td><td><input type=\"text\" name=\"email\" value=\"${data.Email}\" /></td>` +
                                    `<tr><td colspan=\"2\"><input type=\"submit\" value=\"Edit\" /></td></tr></table></form>`);
                            });
                        });
                   });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link5").click(function () {
                                $("div#div1").html("<form accept-charset=\"utf-8\" method=\"post\" action=\"/api/Dispatcher/AddDriver\">" +
                                    "<table class=\"tabela\">" +
                                    "<tr><td>Username:</td><td><input type=\"text\" name=\"username\" /></td></tr>" +
                                    "<tr><td>Password:</td><td><input type=\"text\" name=\"password\" /></td></tr>" +
                                    "<tr><td>Name:</td><td><input type=\"text\" name=\"name\"/></td></tr>" +
                                    "<tr><td>Surname:</td><td><input type=\"text\" name=\"surname\" /></td></tr>" +
                                    "<tr><td>Jmbg:</td><td><input type=\"text\" name=\"jmbg\" /></td></tr>" +
                                    "<tr><td>Phone:</td><td><input type=\"text\" name=\"phone\" /></td></tr>" +
                                    "<tr><td>Email:</td><td><input type=\"text\" name=\"email\" /></td></tr>" +
                                    "<tr><td>Location:</td><td></td></tr>"+
                                    "<tr><td>X: </td><td><input type=\"text\" name=\"x\" /></td></tr>" +
                                    "<tr><td>Y: </td><td><input type=\"text\" name=\"y\" /></td></tr>" +
                                    "<tr><td>Address: </td><td><input type=\"text\" name=\"address\" /></td></tr>" +                                  
                                    "<tr><td>Car:</td><td></td></tr>" +
                                    "<tr><td>Year: </td><td><input type=\"text\" name=\"year\" /></td></tr>" +
                                    "<tr><td>RegNumber: </td><td><input type=\"text\" name=\"regNumber\" /></td></tr>" +                                   
                                    "<tr><td colspan=\"2\"><input type=\"submit\" value=\"Add\" /></td></tr>" +
                                    "</table></form>");
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link6").click(function () {
                                $("div#div1").html(`<form accept-charset=\"utf-8\" method=\"post\" action=\"/api/Driver/EditLocation\">` +
                                    `<table class=\"tabela\">` +                                  
                                    `<tr><td>Location:</td><td></td></tr>` +
                                    `<tr><td>X: </td><td><input type=\"text\" name=\"x\" value="${data.Location.X}"/></td></tr>` +
                                    `<tr><td>Y: </td><td><input type=\"text\" name=\"y\" value="${data.Location.Y}" /></td></tr>` +
                                    `<tr><td>Address: </td><td><input type=\"text\" name=\"address\"value="${data.Location.Address}" /></td></tr>` +
                                    `<tr><td colspan=\"2\"><input type=\"submit\" value=\"Edit\" /></td></tr>` +
                                    `</table></form>`);
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link7").click(function () {
                                $("div#div1").html("<form accept-charset=\"utf-8\" method=\"post\" action=\"/api/Customer/CreateDrive\">" +
                                    "<table class=\"tabela\">" +                                 
                                    "<tr><td>Location:</td><td></td></tr>" +
                                    "<tr><td>X: </td><td><input type=\"text\" name=\"x\" /></td></tr>" +
                                    "<tr><td>Y: </td><td><input type=\"text\" name=\"y\" /></td></tr>" +
                                    "<tr><td>Address: </td><td><input type=\"text\" name=\"address\" /></td></tr>" +                                    
                                    "<tr><td colspan=\"2\"><input type=\"submit\" value=\"Create\" /></td></tr>" +
                                    "</table></form>");
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link8").click(function () {
                                $("div#div1").html("<form accept-charset=\"utf-8\" method=\"post\" action=\"api/Customer/ChangeDrive\">" +
                                    "<table class=\"tabela\">" +
                                    "<tr><td>Location:</td><td></td></tr>" +
                                    "<tr><td>X: </td><td><input type=\"text\" name=\"xEdit\" /></td></tr>" +
                                    "<tr><td>Y: </td><td><input type=\"text\" name=\"yEdit\" /></td></tr>" +
                                    "<tr><td>Address: </td><td><input type=\"text\" name=\"addressEdit\" /></td></tr>" +
                                    "<tr><td colspan=\"2\"><input type=\"submit\" value=\"Edit\" /></td></tr>" +
                                    "</table></form>");
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link9").click(function () {
                                $("div#div1").html("<p> Create comment</p><br>" +
                                    "<form accept-charset=\"utf-8\" method=\"post\" action=\"api/Customer/CancelDrive\">" +                           
                                    "<textarea name=\"description\" rows=\"10\" cols=\"30\"/><br>" +
                                    "<input type=\"submit\" value=\"Create\"/>"+
                                    "</form>");
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link10").click(function () {
                                $("div#div1").html("<form accept-charset=\"utf-8\" method=\"post\" action=\"/api/Dispatcher/CreateDrive\">" +
                                    "<table class=\"tabela\">" +
                                    "<tr><td>Location:</td><td></td></tr>" +
                                    "<tr><td>X: </td><td><input type=\"text\" name=\"x\" /></td></tr>" +
                                    "<tr><td>Y: </td><td><input type=\"text\" name=\"y\" /></td></tr>" +
                                    "<tr><td>Address: </td><td><input type=\"text\" name=\"address\" /></td></tr>" +
                                    "<tr><td colspan=\"2\"><input type=\"submit\" value=\"Create\" /></td></tr>" +
                                    "</table></form>");
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link11").click(function () {
                                $("a#link11").attr("href", "api/Dispatcher/ProcessDrive");
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link12").click(function () {
                                $("div#div1").html("<form accept-charset=\"utf-8\" method=\"post\" action=\"/api/Driver/SuccessfulDrive\">" +
                                    "<table class=\"tabela\">" +
                                    "<tr><td>Destination:</td><td></td></tr>" +
                                    "<tr><td>X: </td><td><input type=\"text\" name=\"x\"/></td></tr>" +
                                    "<tr><td>Y: </td><td><input type=\"text\" name=\"y\"/></td></tr>" +
                                    "<tr><td>Address: </td><td><input type=\"text\" name=\"address\"/></td></tr>" +
                                    "<tr><td>Price: </td><td><input type=\"number\" name=\"price\"/></td></tr>" +
                                    "<tr><td colspan=\"2\"><input type=\"submit\" value=\"Submit\"/></td></tr>" +                                 
                                    "</table>" +
                                    "</form>");
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link13").click(function () {
                                $("div#div1").html("<p> Create comment</p><br>" +
                                    "<form accept-charset=\"utf-8\" method=\"post\" action=\"api/Driver/UnsuccessfulDrive\">" +
                                    "<textarea name=\"description\" rows=\"10\" cols=\"30\"/><br>" +
                                    "<input type=\"submit\" value=\"Create\"/>" +
                                    "</form>");
                          
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link14").click(function () {
                                $.get("/api/Customer", function (data, status) {
                                    let drives = `<h5>Your drives</h5>`;
                                    for (drive in data) {
                                        drives += `<ol>` +
                                            `<li>Drive` +
                                            `<ul>` +
                                                `<li>ID : ${data[drive].Id}</li>` +
                                                `<li>OrderDate : ${data[drive].OrderDate}</li>` +
                                                `<li>Address : ${data[drive].Address.Address}</li>` +
                                                `<li>Car type : ${data[drive].CarType}</li>` +
                                                `<li>Ordered by : ${data[drive].OrderedBy.Username}</li>` +
                                                `<li>Location : ${data[drive].Destination.Address}</li>` +
                                                `<li>Approved by : ${data[drive].ApprovedBy.Username}</li>` +
                                                `<li>Price : ${data[drive].Price}</li>` +
                                                `<li>Commented by : ${data[drive].Comments.CreatedBy.Username}</li>` +
                                                `<li>Comment : ${data[drive].Comments.Description}</li> ` +
                                                `<li> Grade : ${data[drive].Comments.Grade}</li>` +
                                                `<li>Status : ${data[drive].State}</li>` +
                                            `</ul>`+
                                            `</li>`+
                                           `</ol>`;
                                    }
                                    $("div#div1").html(drives);
                                });
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link15").click(function () {
                                $.get("/api/Dispatcher/GetAllDrives", function (data, status) {
                                    let drives = `<h5>All drives</h5>`;
                                    for (drive in data) {
                                        drives += `<ol>` +
                                            `<li>Drive` +
                                            `<ul>` +
                                            `<li>ID : ${data[drive].Id}</li>` +
                                            `<li>OrderDate : ${data[drive].OrderDate}</li>` +
                                            `<li>Address : ${data[drive].Address.Address}</li>` +
                                            `<li>Car type : ${data[drive].CarType}</li>` +
                                            `<li>Ordered by : ${data[drive].OrderedBy.Username}</li>` +
                                            `<li>Location : ${data[drive].Destination.Address}</li>` +
                                            `<li>Approved by : ${data[drive].ApprovedBy.Username}</li>` +
                                            `<li>Price : ${data[drive].Price}</li>` +
                                            `<li>Commented by : ${data[drive].Comments.CreatedBy.Username}</li>` +
                                            `<li>Comment : ${data[drive].Comments.Description}</li> ` +
                                            `<li> Grade : ${data[drive].Comments.Grade}</li>` +
                                            `<li>Status : ${data[drive].State}</li>` +
                                            `</ul>` +
                                            `</li>` +
                                            `</ol>`;
                                    }
                                    $("div#div1").html(drives);
                                });
                            });
                        });
                    });
                });
            });
        });

        $(document).ready(function () {
            $("a#link2").click(function () {
                $("form#form1").submit(function () {
                    $.get("/api/Login", function (data, status) {
                        $("a#link3").click(function () {
                            $("a#link16").click(function () {
                                $.get("/api/Dispatcher/GetDrives", function (data, status) {
                                    let drives = `<h5>Your drives</h5>`;
                                    for (drive in data) {
                                        drives += `<ol>` +
                                            `<li>Drive` +
                                            `<ul>` +
                                            `<li>ID : ${data[drive].Id}</li>` +
                                            `<li>OrderDate : ${data[drive].OrderDate}</li>` +
                                            `<li>Address : ${data[drive].Address.Address}</li>` +
                                            `<li>Car type : ${data[drive].CarType}</li>` +
                                            `<li>Ordered by : ${data[drive].OrderedBy.Username}</li>` +
                                            `<li>Location : ${data[drive].Destination.Address}</li>` +
                                            `<li>Approved by : ${data[drive].ApprovedBy.Username}</li>` +
                                            `<li>Price : ${data[drive].Price}</li>` +
                                            `<li>Commented by : ${data[drive].Comments.CreatedBy.Username}</li>` +
                                            `<li>Comment : ${data[drive].Comments.Description}</li> ` +
                                            `<li> Grade : ${data[drive].Comments.Grade}</li>` +
                                            `<li>Status : ${data[drive].State}</li>` +
                                            `</ul>` +
                                            `</li>` +
                                            `</ol>`;
                                    }
                                    $("div#div1").html(drives);
                                });
                            });
                        });
                    });
                });
            });
        });

    </script>
</head>
<body>
    <div id="divVeliki">
        <div class="divZuti"></div>
        <img src="pozadina.png" class="slika">
        <div class="Naslov"> Taxi Services </div>
        <div class="Registration"><a id="link1">Registration</a></div>
        <div class="Login"><a id="link2">Login</a></div>
        <div class="divMijenjam" id="div1">
            <p class="pocetniP">Welcome to Taxi Services! :)</p>
        </div>        
    </div>
</body>
</html>